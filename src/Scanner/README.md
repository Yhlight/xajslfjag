# CHTLUnifiedScanner统一扫描器

这是CHTL项目的核心组件，负责精准代码切割和语法片段识别。

## 核心功能

### 精准代码切割
- 基于可变长度切片进行工作
- 智能检测代码片段的完整性
- 避免在语法单元中间截断代码

### 语法片段识别
- 识别CHTL语法片段
- 识别CHTL JS语法片段
- 识别CSS语法片段
- 识别JavaScript语法片段

### 切片优化
- 基于上下文进行二次切割
- 确保代码片段不会过小
- 支持多个连续语法片段的合并

## 工作原理

1. **初始扫描**：读取一个片段的代码
2. **完整性检查**：检查下一个片段的开头是否可能组成完整的语法单元
3. **动态扩增**：如果截断位置不合理，向前扩增一定长度
4. **二次切割**：根据最小语法单元进行精确切割
5. **上下文优化**：基于上下文确保片段大小合适

## 示例

```
输入: {{box}}->click
处理: {{box}}-> 和 click
原因: ->是CHTL JS的操作符，不应该被截断
```

## 设计原则

- 精确性：确保语法单元不被错误分割
- 效率性：避免过度切割导致的性能问题
- 智能性：基于上下文进行智能判断
- 独立性：不依赖特定编译器的实现细节